# 注释 #

	注释虽然写起来很痛苦, 但对保证代码可读性至关重要.
	下面的规则描述了如何注释以及在哪儿注释. 当然也要记住: 注释固然很重要,
	但最好的代码本身应该是自文档化. 有意义的类型名和变量名,
	要远胜过要用注释解释的含糊不清的名字.
	你写的注释是给代码读者看的!

## 注释风格 ##
-	下列情况使用使用 `/*...*/` 形式注释.
	-	文件注释
	-	类注释
	-	函数注释
	-	结构体注释
	-	枚举注释
-	其他情况均使用 `//...` 形式注释.

## 文件注释 ##
-	每个文件开始都应包含以下注释信息:
	-	版权声明
	-	许可证
	-	创建者
	-	修改者
	-	功能及简单用法(对于 `.h` 文件)
	-	实现方法及细节(对于 `.cc` 文件)
-	不要简单的在 `.h` 和 `.cc` 间复制注释. 这种偏离了注释的实际意义.

## 类注释 ##
-	每个类的定义都要附带一份注释, 描述类的功能和用法.
-	如果你觉得已经在文件顶部详细描述了该类, 想直接简单的来上一句"完整描述见文件顶部" 也不打紧, 但务必确保有这类注释.
-	如果类有任何同步前提, 文档说明之. 如果该类的实例可被多线程访问,要特别注意文档说明多线程环境下相关的规则和常量使用.

## 函数注释 ##
	函数声明处注释描述函数功能, 定义处描述函数实现.

函数声明:
:	注释位于声明之前, 对函数功能及用法进行描述. 注释使用叙述式 ("Opens the file") 而非指令式 ("Open the file"), 注释只是为了描述函数,而不是命令函数做什么. 通常, 注释不会描述函数如何工作. 那是函数定义部分的事情.

	函数声明处注释的内容:

		函数的输入输出.
		对类成员函数而言: 函数调用期间对象是否需要保持引用参数,
		是否会释放这些参数.
		如果函数分配了空间, 需要由调用者释放.
		参数是否可以为 `NULL`.
		是否存在函数使用上的性能隐患.
		如果函数是可重入的, 其同步前提是什么?

	注释构造/析构函数时, 切记读代码的人知道构造/析构函数是干啥的, 所以"destroys this object" 这样的注释是没有意义的.注明构造函数对参数做了什么 (例如, 是否取得指针所有权)以及析构函数清理了什么. 如果都是些无关紧要的内容, 直接省掉注释.析构函数前没有注释是很正常的.

函数定义:
:	每个函数定义时要用注释说明函数功能和实现要点.比如说说你用的编程技巧, 实现的大致步骤, 或解释如此实现的理由, 为什么前半部分要加锁而后半部分不需要.

	*不要* 从 `.h` 文件或其他地方的函数声明处直接复制注释. 简要重述函数功能是可以的, 但注释重点要放在如何实现上.

## 变量注释 ##
	通常变量名本身足以很好说明变量用途. 某些情况下, 也需要额外的注释说明.

类数据成员:
:	每个类数据成员 (也叫实例变量或成员变量) 都应该用注释说明用途. 如果变量可以接受 `NULL` 或 `-1` 等警戒值, 须加以说明.

全局变量:
:	和数据成员一样, 所有全局变量也要注释说明含义及用途.

## 实现注释 ##
	对于代码中巧妙的, 晦涩的, 有趣的, 重要的地方加以注释.

代码前注释:
:	巧妙或复杂的代码段前要加注释. 比如:

		// Divide result by two, taking into account that x
		// contains the carry from the add.
		for (int i = 0; i < result->size(); i++)
		{
			x = (x << 8) + (*result)[i];
			(*result)[i] = x >> 1;
			x &= 1;
		}


行注释:
:	比较隐晦的地方要在行尾加入注释. 在行尾空两格进行注释. 比如:

		// If we have enough memory, mmap the data portion too.
		mmap_budget = max<int64>(0, mmap_budget - index_->length());
		if (mmap_budget >= data_size_ && !MmapData(mmap_chunk_bytes, mlock))
			return;  // Error already logged.

	注意, 这里用了两段注释分别描述这段代码的作用, 和提示函数返回时错误已经被记入日志.

    如果你需要连续进行多行注释, 可以使之对齐获得更好的可读性:

常值(NULL, true/false, 1, 2, 3...):
:	向函数传入 `NULL`, 布尔值或整数时, 要注释说明含义, 或使用常量让代码望文知意.

## 标点, 拼写和语法 ##
-	注意标点, 拼写和语法; 写的好的注释比差的要易读的多.
-	注释的通常写法是包含正确大小写和结尾句号的完整语句. 短一点的注释 (如代码行尾注释) 可以随意点, 依然要注意风格的一致性.完整的语句可读性更好, 也可以说明该注释是完整的, 而不是一些不成熟的想法.
-	虽然被别人指出该用分号时却用了逗号多少有些尴尬, 但清晰易读的代码还是很重要的. 正确的标点, 拼写和语法对此会有所帮助.

## TODO 注释 ##
	对那些临时的, 短期的解决方案, 或已经够好但仍不完美的代码使用 `TODO`
-	`TODO` 注释要使用全大写的字符串 `TODO`, 在随后的圆括号里写上你的大名, 邮件地址, 或其它身份标识. 冒号是可选的. 主要目的是让添加注释的人 (也是可以请求提供更多细节的人) 可根据规范的 `TODO` 格式进行查找. 添加 `TODO` 注释并不意味着你要自己来修正.
-	如果加 `TODO` 是为了在 "将来某一天做某事", 可以附上一个非常明确的时间 "Fix by November 2005"), 或者一个明确的事项 ("Remove this code when all clients can handle XML responses.").
